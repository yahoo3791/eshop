"use strict";(self["webpackChunkeshop"]=self["webpackChunkeshop"]||[]).push([[136],{3136:function(e,t,s){s.r(t),s.d(t,{default:function(){return Me}});var i=s(3396),o=s(7139),a=s(9242);const n=(0,i._)("div",{class:"loadingio-spinner-interwind-il303leqtya"},[(0,i._)("div",{class:"ldio-k17d8xi3rys"},[(0,i._)("div",null,[(0,i._)("div",null,[(0,i._)("div",null,[(0,i._)("div")])]),(0,i._)("div",null,[(0,i._)("div",null,[(0,i._)("div")])])])])],-1),r={class:"bg-dark w-100 h-100 pb-5 overflow-hidden position-relative"},d={class:"container pt-utility text-white position-relative"},l={class:"row"},c=(0,i._)("div",{class:"spinner-border text-light",role:"status",style:{width:"3rem",height:"3rem"}},[(0,i._)("span",{class:"visually-hidden"},"Loading...")],-1),m=[c],u=(0,i._)("h1",{class:"title-01"},"購物車無加入商品",-1),p=(0,i.Uk)("前往商城"),h={class:"row mx-0"},v={class:"col-12 p-0 my-4"},f={class:"d-flex justify-content-between align-items-center pb-3",style:{"border-bottom":"1px solid #404040"}},w=(0,i._)("h1",{class:"mb-0 text-center tracking-widest font-bold text-3xl"},"購物車",-1),x={class:""},_=(0,i.Uk)("刪除全部 "),b=(0,i.Uk)("繼續購物 "),g={class:"row"},C={class:"d-flex d-md-none justify-content-between pb-2 mb-2 tracking-wide"},k=(0,i.Uk)("編輯 "),y={class:"d-flex"},L={class:"mx-auto cartsInput-sm-Item"},D=["onClick","onKeydown"],T={for:"smNum"},B=["disabled","onChange","value"],E=["onClick","onKeydown"],$={class:"d-flex"},O={class:"carts-pic"},I=["src"],W={class:"ms-3 d-flex flex-column justify-content-between text-2xl"},P={class:"tracking-wide font-semibold"},U={class:"d-none d-md-inline-block"},N={class:"leading-7 tracking-wider text-lg"},Z={class:"leading-7 d-block tracking-wider text-xl"},M={class:"ms-auto cartsInput-md-container d-none d-md-inline-block"},K={class:"cartsInput-md-Item d-flex align-items-center"},q=["onClick","onKeydown"],z={class:"cartsInput-md-input text-xl"},V={for:"num",class:"d-block h-100"},H=["onUpdate:modelValue","onChange"],A=["onClick","onKeydown"],X=["onClick","onKeydown"],j=(0,i._)("i",{class:"bi bi-trash3-fill fs-3"},null,-1),Q=[j],F={class:"text-white text-end tracking-widest font-semibold text-xl pb-3"},S={class:"row"},Y={class:"col-12 mb-5"},G=(0,i._)("p",{class:"text-white text-xl"},"我已確認商品資訊",-1),J={class:"col-12 text-end"},R=(0,i.Uk)("下一步 ");function ee(e,t,s,c,j,ee){const te=(0,i.up)("loading"),se=(0,i.up)("Navbar"),ie=(0,i.up)("w-button"),oe=(0,i.up)("router-link"),ae=(0,i.up)("w-checkbox"),ne=(0,i.up)("w-flex"),re=(0,i.up)("DeleteCartsAll"),de=(0,i.up)("DeleteCarts"),le=(0,i.up)("Footer");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(te,{active:j.isLoading,"onUpdate:active":t[0]||(t[0]=e=>j.isLoading=e)},{default:(0,i.w5)((()=>[n])),_:1},8,["active"]),(0,i.Wm)(se),(0,i._)("div",r,[(0,i._)("div",d,[(0,i._)("div",l,[(0,i._)("div",{class:(0,o.C_)(["col-12 text-center pt-5",{"d-none":j.productLoading}])},m,2),(0,i._)("div",{class:(0,o.C_)(["col-12 text-center",{"d-none":j.orderOpen}]),style:{padding:"20vh 0"}},[u,(0,i.Wm)(oe,{to:"/user/products",class:"text-decoration-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(ie,{class:"mt-5 w-btn"},{default:(0,i.w5)((()=>[p])),_:1})])),_:1})],2)]),(0,i._)("div",{class:(0,o.C_)({"d-none":j.orderHide})},[(0,i._)("div",h,[(0,i._)("div",v,[(0,i._)("div",f,[w,(0,i._)("div",x,[(0,i.Wm)(ie,{class:"w-btn",onClick:t[1]||(t[1]=(0,a.iM)((e=>this.$refs.DeleteCartsAll.modalShow()),["prevent"]))},{default:(0,i.w5)((()=>[_])),_:1}),(0,i.Wm)(ie,{class:"w-btn ms-2",onClick:t[2]||(t[2]=e=>this.$router.push("/user/products"))},{default:(0,i.w5)((()=>[b])),_:1})])])])]),(0,i._)("div",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(j.cartsData,((t,s)=>((0,i.wg)(),(0,i.iD)("div",{class:"col-12 mt-4 mb-2",key:t.id},[(0,i._)("div",C,[(0,i.Wm)(ie,{class:"w-btn ms-2",onClick:e=>ee.open(t,s)},{default:(0,i.w5)((()=>[k])),_:2},1032,["onClick"]),(0,i._)("p",null,(0,o.zw)(t.product.category)+"類",1)]),(0,i._)("div",{class:"d-md-none cartsInput-sm-container position-absolute mx-auto mt-1 mb-2 text-white",ref_for:!0,ref:"left",style:{transform:"translateX(-500px)"}},[(0,i._)("div",y,[(0,i._)("div",L,[(0,i._)("div",{class:"border text-center cartsInput-sm-add cursor-pointer",onClick:(0,a.iM)((e=>ee.add(t.id,s)),["prevent"]),onKeydown:e=>ee.add(t.id,s)}," + ",40,D),(0,i._)("label",T,[(0,i._)("input",{name:"smNum",id:"smNum",disabled:this.isLoading,ref_for:!0,ref:"updateValue",onChange:e=>ee.updateQty(t.id,s),class:"d-block text-center text-white border cartsInput-sm-input",type:"text",min:"1",value:t.qty},null,40,B)]),(0,i._)("div",{class:"border text-center cartsInput-sm-min cursor-pointer",onClick:(0,a.iM)((e=>ee.min(t.id,s)),["prevent"]),onKeydown:e=>ee.min(t.id,s)}," - ",40,E)])])],512),(0,i._)("div",{class:"d-flex align-items-center cartsItem pb-5",ref_for:!0,ref:"right",style:{transform:"translateX(0px)"}},[(0,i._)("div",$,[(0,i._)("div",O,[(0,i._)("img",{src:t.product.imageUrl,class:"carts-img",alt:""},null,8,I)]),(0,i._)("div",W,[(0,i._)("p",P,[(0,i.Uk)((0,o.zw)(t.product.title)+" ",1),(0,i._)("span",U," ("+(0,o.zw)(t.product.unit)+") ",1)]),(0,i._)("p",N," 單價"+(0,o.zw)(t.product.price)+"$ ",1),(0,i._)("p",Z," 小計"+(0,o.zw)(e.$filters.currency(t.total))+"$ ",1)])]),(0,i._)("div",M,[(0,i._)("div",K,[(0,i._)("div",{onClick:(0,a.iM)((e=>ee.min(t.id,s)),["prevent"]),onKeydown:e=>ee.min(t.id,s),class:"cartsInput-md-min cursor-pointer text-center border"},"-",40,q),(0,i._)("div",z,[(0,i._)("label",V,[(0,i.wy)((0,i._)("input",{id:"num",name:"num","onUpdate:modelValue":e=>t.qty=e,type:"text",min:"1",style:{"max-width":"120px"},class:"d-block border rounded-0 bg-dark text-center text-white border w-100",onChange:e=>ee.updateQty(t.id,s),ref_for:!0,ref:"updateValue"},null,40,H),[[a.nr,t.qty]])])]),(0,i._)("div",{onClick:(0,a.iM)((e=>ee.add(t.id,s)),["prevent"]),onKeydown:e=>ee.add(t.id,s),class:"cartsInput-md-add cursor-pointer text-center border"},"+",40,A)])]),(0,i._)("div",{class:"ms-auto ms-md-3 delete text-center cartsInput-trash cursor-pointer",onClick:e=>ee.openDeleteCarts(t),onKeydown:e=>ee.openDeleteCarts(t)},Q,40,X)],512)])))),128)),(0,i._)("p",F,"總計 "+(0,o.zw)(e.$filters.currency(this.orderTotal.total))+" $ ",1)]),(0,i._)("div",S,[(0,i._)("div",Y,[(0,i.Wm)(ne,{class:"align-center tracking-wide"},{default:(0,i.w5)((()=>[(0,i.Wm)(ae,{class:"ms-auto",color:"grey",modelValue:j.selection1,"onUpdate:modelValue":t[3]||(t[3]=e=>j.selection1=e)},{default:(0,i.w5)((()=>[G])),_:1},8,["modelValue"])])),_:1})]),(0,i._)("div",J,[(0,i.Wm)(ie,{class:"w-btn",onClick:ee.contactMethod},{default:(0,i.w5)((()=>[R])),_:1},8,["onClick"])])])],2)]),(0,i.Wm)(re,{ref:"DeleteCartsAll",onCheckDeleteAll:t[4]||(t[4]=e=>ee.deleteCarts())},null,512),(0,i.Wm)(de,{ref:"DeleteCarts",onCheckDelete:t[5]||(t[5]=e=>ee.deleteProduct())},null,512)]),(0,i.Wm)(le)],64)}var te=s(5191),se=s(7043),ie=s(3752),oe=s.n(ie),ae=s(5147),ne=s.n(ae),re=s(5820);const de={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},le={class:"modal-dialog",style:{margin:"30vh auto"}},ce={class:"modal-content text-black"},me=(0,i._)("div",{class:"modal-header"},[(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),ue=(0,i._)("div",{class:"modal-body title-01 text-center py-5"}," 清除購物車 ",-1),pe={class:"modal-footer"},he=(0,i.Uk)("取消 "),ve=(0,i.Uk)("確定刪除 ");function fe(e,t,s,o,a,n){const r=(0,i.up)("w-button");return(0,i.wg)(),(0,i.iD)("div",de,[(0,i._)("div",le,[(0,i._)("div",ce,[me,ue,(0,i._)("div",pe,[(0,i.Wm)(r,{class:"modal-btn","bg-color":"black",color:"white","data-bs-dismiss":"modal"},{default:(0,i.w5)((()=>[he])),_:1}),(0,i.Wm)(r,{class:"modal-btn","bg-color":"red",color:"white",onClick:t[0]||(t[0]=e=>this.$emit("checkDeleteAll"))},{default:(0,i.w5)((()=>[ve])),_:1})])])])],512)}var we=s(1339),xe={data(){return{modal:{}}},mixins:[we.Z]},_e=s(89);const be=(0,_e.Z)(xe,[["render",fe]]);var ge=be;const Ce={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},ke={class:"modal-dialog",style:{margin:"30vh auto"}},ye={class:"modal-content text-black"},Le=(0,i._)("div",{class:"modal-header"},[(0,i._)("h5",{class:"modal-title",id:"exampleModalLabel"},"刪除品項"),(0,i._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),De={class:"modal-body title-01 text-center py-5"},Te={class:""},Be={class:""},Ee={class:"modal-footer"},$e=(0,i.Uk)("取消 "),Oe=(0,i.Uk)("確定刪除 ");function Ie(e,t,s,a,n,r){const d=(0,i.up)("w-button");return(0,i.wg)(),(0,i.iD)("div",Ce,[(0,i._)("div",ke,[(0,i._)("div",ye,[Le,(0,i._)("div",De,[(0,i._)("p",Te,(0,o.zw)(n.deleteData.title),1),(0,i._)("p",Be,(0,o.zw)(n.deleteNum.qty)+"/"+(0,o.zw)(n.deleteData.unit),1)]),(0,i._)("div",Ee,[(0,i.Wm)(d,{class:"modal-btn","bg-color":"black",color:"white","data-bs-dismiss":"modal"},{default:(0,i.w5)((()=>[$e])),_:1}),(0,i.Wm)(d,{class:"modal-btn","bg-color":"red",color:"white",onClick:t[0]||(t[0]=e=>this.$emit("checkDelete"))},{default:(0,i.w5)((()=>[Oe])),_:1})])])])],512)}var We={data(){return{modal:{},deleteData:{},deleteNum:{}}},mixins:[we.Z],mounted(){re.Z.on("delete-data",(e=>{this.deleteData=e.product,this.deleteNum=e}))}};const Pe=(0,_e.Z)(We,[["render",Ie]]);var Ue=Pe,Ne={data(){return{cartsData:{},isLoading:!1,orderHide:!0,orderOpen:!1,orderTotal:{},openDoor:!1,selection1:!1,deleteItem:{},num:1,productLoading:!0}},components:{Navbar:te.Z,Footer:se.Z,Loading:oe(),DeleteCartsAll:ge,DeleteCarts:Ue},methods:{getData(){const e="https://vue3-course-api.hexschool.io/api/dessertsweet/cart";this.orderOpen=!0,this.productLoading=!1,this.axios.get(e).then((e=>{this.orderTotal=e.data.data,this.cartsData=e.data.data.carts,this.productLoading=!0,0===this.cartsData.length?(this.orderHide=!0,this.orderOpen=!1):this.orderHide=!1}))},deleteProduct(){const{id:e}=this.deleteItem,t=`https://vue3-course-api.hexschool.io/api/dessertsweet/cart/${e}`;this.axios.delete(t).then((e=>{if(this.$refs.DeleteCarts.modalHide(),e.data.success){re.Z.emit("updateCartsNum",0);const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});e.fire({icon:"success",title:"刪除品項成功"}),this.getData()}else{const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});e.fire({icon:"error",title:"更新異常"})}}))},openDeleteCarts(e){this.$refs.DeleteCarts.modalShow(),re.Z.emit("delete-data",e),this.deleteItem=e},deleteCarts(){const e="https://vue3-course-api.hexschool.io/api/dessertsweet/carts";this.$refs.DeleteCartsAll.modalHide(),this.axios.delete(e).then((e=>{if(this.getData(),re.Z.emit("updateCartsNum",0),e.data.success){const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});e.fire({icon:"success",title:"刪除成功"})}else{const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});e.fire({icon:"error",title:"更新異常"})}}))},updateQty(e,t){const s=Number(this.$refs.updateValue[t].value);if(s<=0||s>=50){const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});return e.fire({icon:"warning",title:"請輸入正確數字:等於1小於51"}),void this.getData()}const i={product_id:e,qty:s},o=`https://vue3-course-api.hexschool.io/api/dessertsweet/cart/${e}`;this.isLoading=!0,this.axios.put(o,{data:i}).then((e=>{if(this.isLoading=!1,this.getData(),e.data.success){const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});e.fire({icon:"success",title:"更新品項成功"})}else{const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});e.fire({icon:"error",title:"更新異常"})}})),re.Z.emit("updateCartsNum")},contactMethod(){if(!1!==this.selection1)this.$router.push("/user/ordercontact");else{const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});e.fire({icon:"info",title:'確認訂單完成後<br>記得勾選我已確認商品資訊 <i class="bi bi-emoji-smile-fill"></i>'})}},open(e,t){!0===this.openDoor?(this.$refs.right[t].style.transform="translateX(0px)",this.$refs.left[t].style.transform="translateX(-500px)",this.openDoor=!1):!1===this.openDoor&&(this.$refs.right[t].style.transform="translateX(100px)",this.$refs.left[t].style.transform="translateX(0px)",this.openDoor=!0)},add(e,t){if(this.num=this.cartsData[t].qty,this.num+=1,this.num>=50){this.$refs.updateValue[t].value=1,this.getData();const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});return void e.fire({icon:"",title:"單筆數量不超過50"})}const s={product_id:e,qty:this.num},i=`https://vue3-course-api.hexschool.io/api/dessertsweet/cart/${e}`;this.isLoading=!0,this.axios.put(i,{data:s}).then((e=>{if(this.isLoading=!1,e.data.success){const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});e.fire({icon:"success",title:"更新品項成功"}),this.getData(),re.Z.emit("updateCartsNum")}else{const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});e.fire({icon:"error",title:"更新異常"})}}))},min(e,t){if(this.num=this.cartsData[t].qty,this.num-=1,this.num<=0){const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});return void e.fire({icon:"",title:"單筆數量不得低於1"})}const s={product_id:e,qty:this.num},i=`https://vue3-course-api.hexschool.io/api/dessertsweet/cart/${e}`;this.isLoading=!0,this.axios.put(i,{data:s}).then((e=>{if(this.isLoading=!1,e.data.success){const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});e.fire({icon:"success",title:"更新品項成功"}),this.getData(),re.Z.emit("updateCartsNum")}else{const e=ne().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ne().stopTimer),e.addEventListener("mouseleave",ne().resumeTimer)}});e.fire({icon:"error",title:"更新異常"})}}))}},mounted(){this.getData()}};const Ze=(0,_e.Z)(Ne,[["render",ee]]);var Me=Ze}}]);
//# sourceMappingURL=136.391e35d5.js.map