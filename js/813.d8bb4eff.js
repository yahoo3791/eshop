"use strict";(self["webpackChunkeshop"]=self["webpackChunkeshop"]||[]).push([[813],{5813:function(e,t,i){i.r(t),i.d(t,{default:function(){return Ce}});var s=i(3396),o=i(7139),n=i(9242);const r=(0,s._)("div",{class:"loadingio-spinner-interwind-il303leqtya"},[(0,s._)("div",{class:"ldio-k17d8xi3rys"},[(0,s._)("div",null,[(0,s._)("div",null,[(0,s._)("div",null,[(0,s._)("div")])]),(0,s._)("div",null,[(0,s._)("div",null,[(0,s._)("div")])])])])],-1),a={class:"bg-dark pt-5"},d={class:"container pt-5"},c={class:"row pb-5"},l={class:"col-12"},u={"aria-label":"breadcrumb"},p={class:"breadcrumb py-2 px-1 p-md-2 breadcrumb-style tracking-normal"},m=(0,s._)("li",{class:"breadcrumb-item"},[(0,s._)("a",{class:"text-black text-decoration-none",href:"#"},"首頁")],-1),v=(0,s._)("li",{class:"breadcrumb-item breadcrumb-item-none"},"商品列表",-1),h={class:"breadcrumb-item breadcrumb-item-none","aria-current":"page"},g=(0,s._)("li",{class:"breadcrumb-item breadcrumb-item-none"},"內容",-1),b={class:"ms-auto"},w=(0,s.Uk)("返回"),_=(0,s._)("div",{class:"spinner-border text-light",role:"status",style:{width:"3rem",height:"3rem"}},[(0,s._)("span",{class:"visually-hidden"},"Loading...")],-1),f=[_],x={class:"row justify-content-center align-items-center"},y={class:"col-12 col-md-4"},k=["src"],L=(0,s._)("div",{class:"position-absolute swiper-bg top-0"},null,-1),C={class:"col-12 col-md-5 offset-md-1 d-flex flex-column justify-content-between"},D={class:""},S={class:""},H={class:"text-2xl font-bold tracking-wider my-4 mb-md-4 text-white"},E={key:0,class:"badge bg-danger"},O={key:1,class:"badge bg-secondary opacity-50"},T={class:"p-01"},B={class:"mt-5 text-indent2rem"},I=(0,s._)("h5",{class:"mt-5"},"成份:",-1),U={class:""},z=(0,s._)("h5",{class:"mt-5"},"尺寸:",-1),K={class:"type-btn"},P={class:"productmore-item py-5"},M={class:"d-flex align-items-center"},N={class:"text-white"},$={class:"productmore-price d-inline-block ps-2"},F={class:"font-semibold text-2xl text-red"},W={class:"d-flex align-items-center justify-content-between mt-2"},j={class:"numInput-item d-flex justify-content-end align-items-center"},A={class:"counter border"},R={for:"num",class:"d-block h-100"},Z=["disabled"],q=(0,s.Uk)(" 加入購物車 "),J=(0,s.uE)('<div class="line"></div><div class="col-12 col-md-9 mx-auto"><div class="mb-5"><h4 class="pb-2 tracking-wide font-medium text-xl" style="border-bottom:1px solid #404040;">保存方式</h4><p>｜最佳賞味期限｜<br> 可冷藏保存1週，冷凍保存2週。請見商品標示日期。<br> 建議放入冷藏前請將蛋糕用保鮮盒密封好，再存放食用前於室溫回溫20-30分鐘風味更佳！開封後請儘速食用完畢。<br></p><p class="mt-3"> 餅乾：常溫密封約可保存2週，冷凍密封約可保存2-3個月，回溫即可食用。<br> 蛋糕：放置冷藏約可保存5天。<br> 慕斯：密封冷藏約可保存2-3天，密封冷凍約可保存7-10天，回溫即可食用。 </p></div></div>',2),V={key:0,class:"container"},Y={class:"row justify-content-center"},G={class:"col-12 col-md-9 py-5 text-white"},Q=(0,s._)("h4",{class:"pb-2 tracking-wide font-medium text-xl",style:{"border-bottom":"1px solid #404040"}},"您可能喜歡這些...",-1),X={class:"swiper-container"},ee=["onClick","onKeydown"],te=["src"],ie={class:"product-content-h5 text-base font-medium tracking-wide py-2"},se={class:"product-content"},oe=(0,s.Uk)("/ "),ne={class:"product-p"},re=["disabled","onClick","onKeydown"],ae=(0,s._)("div",{class:"d-none spinner-border spinner-border-sm",role:"status"},null,-1),de=(0,s.Uk)("加入購物車 "),ce=[ae,de];function le(e,t,i,_,ae,de){const le=(0,s.up)("loading"),ue=(0,s.up)("Navbar"),pe=(0,s.up)("router-link"),me=(0,s.up)("vue-easy-lightbox"),ve=(0,s.up)("swiper-slide"),he=(0,s.up)("swiper"),ge=(0,s.up)("Footer");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(le,{active:ae.isLoading,"onUpdate:active":t[0]||(t[0]=e=>ae.isLoading=e)},{default:(0,s.w5)((()=>[r])),_:1},8,["active"]),(0,s._)("div",a,[(0,s.Wm)(ue),(0,s._)("div",d,[(0,s._)("div",c,[(0,s._)("div",l,[(0,s._)("nav",u,[(0,s._)("ol",p,[m,v,(0,s._)("li",h,(0,o.zw)(ae.product.category)+"類 ",1),g,(0,s._)("li",b,[(0,s.Wm)(pe,{to:"/user/products",class:"breadcrumb-item-back text-black text-decoration-none","data-bs-toggle":"tooltip","data-bs-placement":"bottom",title:"前往商品頁"},{default:(0,s.w5)((()=>[w])),_:1})])])])]),(0,s._)("div",{class:(0,o.C_)(["col-12 text-center pt-5",{"d-none":ae.productLoading}])},f,2)])]),(0,s._)("div",{class:(0,o.C_)(["container",{"d-none":!ae.productLoading}])},[(0,s._)("div",x,[(0,s._)("div",y,[(0,s._)("div",{class:"position-relative cursor-pointer overflow-hidden",onClick:t[1]||(t[1]=(...e)=>_.showSingle&&_.showSingle(...e)),onKeypress:t[2]||(t[2]=(...e)=>_.showSingle&&_.showSingle(...e))},[(0,s._)("img",{src:ae.product.imageUrl,class:"w-100 h-100",alt:"productImage"},null,8,k),L],32),(0,s.Wm)(me,{visible:_.visibleRef,imgs:ae.product.imageUrl,index:_.indexRef,onHide:_.onHide},null,8,["visible","imgs","index","onHide"])]),(0,s._)("div",C,[(0,s._)("div",D,[(0,s._)("div",S,[(0,s._)("h1",H,[ae.product.num<=5&&ae.product.num>=1?((0,s.wg)(),(0,s.iD)("span",E,"HOT")):0===ae.product.num?((0,s.wg)(),(0,s.iD)("span",O,"SOLD OUT")):(0,s.kq)("",!0),(0,s.Uk)(" "+(0,o.zw)(ae.product.title),1)])]),(0,s._)("div",T,[(0,s._)("p",B,(0,o.zw)(ae.product.content),1),I,(0,s._)("p",U,(0,o.zw)(ae.product.description),1),z,(0,s._)("div",K,(0,o.zw)(ae.product.unit),1)])]),(0,s._)("div",P,[(0,s._)("div",M,[(0,s._)("del",N,"原價"+(0,o.zw)(ae.product.origin_price)+"$",1),(0,s._)("div",$,[(0,s._)("p",F,"優惠價"+(0,o.zw)(ae.product.price)+"$",1)])]),(0,s._)("div",W,[(0,s._)("div",j,[(0,s._)("div",{onClick:t[3]||(t[3]=(0,n.iM)((e=>de.min()),["prevent"])),onKeypress:t[4]||(t[4]=e=>de.min()),class:"cursor-pointer numInput-prev text-center"},"-",32),(0,s._)("div",A,[(0,s._)("label",R,[(0,s.wy)((0,s._)("input",{id:"num",name:"num","onUpdate:modelValue":t[5]||(t[5]=e=>this.num=e),type:"text",min:"1",class:"d-block rounded-0 bg-dark border-0 text-center text-white h-100"},null,512),[[n.nr,this.num]])])]),(0,s._)("div",{onClick:t[6]||(t[6]=(0,n.iM)((e=>de.add()),["prevent"])),onKeydown:t[7]||(t[7]=e=>de.add()),class:"cursor-pointer numInput-next text-center"},"+",32)]),(0,s._)("div",{class:"fav text-red ms-auto me-3 cursor-pointer",onClick:t[8]||(t[8]=(0,n.iM)((e=>de.addFav(ae.product)),["stop"])),onKeydown:t[9]||(t[9]=e=>de.addFav(ae.product))},[(0,s._)("i",{class:(0,o.C_)(["bi mx-2 fs-1",ae.favoriteData.includes(ae.product.id)?"bi-heart-fill":"bi-heart"])},null,2)],32),ae.product.num>=1?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,o.C_)([{"opacity-75":!0===this.isLoading},"w-btn-product cursor-pointer"]),onClick:t[11]||(t[11]=(0,n.iM)((e=>de.addCart(ae.product.id,e)),["prevent"])),onKeydown:t[12]||(t[12]=t=>de.addCart(e.item,t)),disabled:!0===this.isLoading},[(0,s._)("div",{onClick:t[10]||(t[10]=(0,n.iM)((()=>{}),["stop"])),class:"d-none spinner-border spinner-border-sm",role:"status"}),q],42,Z)):((0,s.wg)(),(0,s.iD)("div",{key:1,class:"w-btn-product opacity-50",onClick:t[13]||(t[13]=(0,n.iM)((()=>{}),["stop"]))}," 已售完 "))])])]),J])],2),0!==ae.sameProduct.length?((0,s.wg)(),(0,s.iD)("div",V,[(0,s._)("div",Y,[(0,s._)("div",G,[Q,(0,s._)("div",X,[(0,s.Wm)(he,{ref:"{swiperRef}",slidesPerView:2,centeredSlides:!0,spaceBetween:30,navigation:!0,modules:_.modules,autoplay:{delay:2500,disableOnInteraction:!1},class:"mySwiper"},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(ae.sameProduct,((e,i)=>((0,s.wg)(),(0,s.j4)(ve,{key:i,class:"flex-column"},{default:(0,s.w5)((()=>[(0,s._)("div",{class:"mx-auto product-content-container cursor-pointer",onClick:(0,n.iM)((t=>de.more(e.id,i)),["stop"]),onKeydown:t=>de.more(e.id,i),style:{"max-width":"250px"}},[(0,s._)("img",{src:e.imageUrl,alt:""},null,8,te),(0,s._)("h5",ie,(0,o.zw)(e.title),1),(0,s._)("p",se,[(0,s._)("del",null,(0,o.zw)(e.origin_price)+"$",1),oe,(0,s._)("span",ne,"優惠價"+(0,o.zw)(e.price)+"$",1)]),e.num>=1?((0,s.wg)(),(0,s.iD)("div",{key:0,class:(0,o.C_)([{"opacity-75":!0===this.isLoading},"mt-2 w-btn-product"]),disabled:!0===this.isLoading,onClick:(0,n.iM)((t=>de.addCart(e.id,t)),["stop"]),onKeydown:t=>de.addCart(e.id,t)},ce,42,re)):((0,s.wg)(),(0,s.iD)("div",{key:1,class:"w-btn-product mt-2 opacity-50",onClick:t[14]||(t[14]=(0,n.iM)((()=>{}),["stop"]))}," 已售完 "))],40,ee)])),_:2},1024)))),128))])),_:1},8,["modules"])])])])])):(0,s.kq)("",!0)]),(0,s.Wm)(ge)],64)}var ue=i(5191),pe=i(7043),me=i(3752),ve=i.n(me),he=i(5147),ge=i.n(he),be=i(5032),we=i(9231),_e=i(5820),fe=i(6706),xe=i(4870),ye={data(){return{productAll:{},product:{},num:1,isLoading:!1,productLoading:!0,productHistory:[],sameProduct:[],favoriteData:[]}},components:{Loading:ve(),Navbar:ue.Z,Footer:pe.Z,Swiper:be.tq,SwiperSlide:be.o5,VueEasyLightbox:fe.Z},setup(){const e=(0,xe.iH)(!1),t=(0,xe.iH)(0),i=(0,xe.iH)([]),s=()=>{e.value=!0},o=()=>{s()},n=()=>{e.value=!1};return{modules:[we.pt,we.tl,we.W_],visibleRef:e,indexRef:t,imgsRef:i,showSingle:o,onHide:n}},methods:{getData(){const e=this.$route.params.productId;this.productLoading=!1;const t=`https://vue3-course-api.hexschool.io/api/dessertsweet/product/${e}`;this.axios.get(t).then((e=>{this.productLoading=!0,this.product=e.data.product}))},addCart(e,t){if(t.target.children[0].classList.remove("d-none"),this.num<=0||this.num>=50){t.target.children[0].classList.add("d-none");const e=ge().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ge().stopTimer),e.addEventListener("mouseleave",ge().resumeTimer)}});e.fire({icon:"warning",title:"請輸入正確數字:等於1小於51"}),this.num=1}const i={product_id:e,qty:Number(this.num)},s="https://vue3-course-api.hexschool.io/api/dessertsweet/cart";this.isLoading=!0,this.axios.post(s,{data:i}).then((e=>{if(this.isLoading=!1,t.target.children[0].classList.add("d-none"),e.data.success){_e.Z.emit("updateNum");const e=ge().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ge().stopTimer),e.addEventListener("mouseleave",ge().resumeTimer)}});e.fire({icon:"success",title:"成功加入購物車"}),this.num=1}else{const e=ge().mixin({toast:!0,position:"top",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ge().stopTimer),e.addEventListener("mouseleave",ge().resumeTimer)}});e.fire({icon:"error",title:"加入購物車失敗"})}}))},add(){this.num+=1,this.num>=50&&(this.num=50)},min(){this.num-=1,this.num<=0&&(this.num=1)},getDataAll(){const e="https://vue3-course-api.hexschool.io/api/dessertsweet/products/all";this.axios.get(e).then((e=>{this.productAll=e.data.products,e.data.success&&this.updateHistory()}))},updateHistory(){const e=JSON.parse(localStorage.getItem("setHistory"))||[],t=[];this.productAll.forEach((i=>{0!==e.length&&i.id===e[0]&&t.push(i)})),this.productAll.forEach((i=>{0!==e.length&&t[0].category===i.category&&this.sameProduct.push(i)}))},more(e){this.$router.replace(`/user/product/${e}`)},addFav(e){if(this.favoriteData.includes(e.id)){this.favoriteData.splice(this.favoriteData.indexOf(e.id),1);const t=ge().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ge().stopTimer),e.addEventListener("mouseleave",ge().resumeTimer)}});t.fire({icon:"success",title:"成功移除收藏"})}else{this.favoriteData.push(e.id);const t=ge().mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:e=>{e.addEventListener("mouseenter",ge().stopTimer),e.addEventListener("mouseleave",ge().resumeTimer)}});t.fire({icon:"success",title:"成功加入收藏"})}localStorage.setItem("fav",JSON.stringify(this.favoriteData)),_e.Z.emit("updateNum")},updateFav(){this.favoriteData=JSON.parse(localStorage.getItem("fav"))||[]}},mounted(){this.getData(),this.getDataAll(),this.updateFav(),setInterval((()=>{localStorage.removeItem("setHistory")}),36e5)}},ke=i(89);const Le=(0,ke.Z)(ye,[["render",le]]);var Ce=Le}}]);
//# sourceMappingURL=813.d8bb4eff.js.map