"use strict";(self["webpackChunkeshop"]=self["webpackChunkeshop"]||[]).push([[297],{9848:function(e,a,t){t.d(a,{Z:function(){return p}});var l=t(3396),d=t(9242),s=t(7139);const i={"aria-label":"Page navigation example"},n={class:"pagination justify-content-center"},o=(0,l._)("li",{class:"page-item"},[(0,l._)("a",{class:"page-link text-secondary",href:"#","aria-label":"Previous"},[(0,l._)("span",{"aria-hidden":"true"},"«")])],-1),r=["onClick"],c=(0,l._)("li",{class:"page-item"},[(0,l._)("a",{class:"page-link text-secondary",href:"#","aria-label":"Next"},[(0,l._)("span",{"aria-hidden":"true"},"»")])],-1);function u(e,a,t,u,h,b){return(0,l.wg)(),(0,l.iD)("nav",i,[(0,l._)("ul",n,[o,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.pages.total_pages,((e,a)=>((0,l.wg)(),(0,l.iD)("li",{class:"page-item",key:a},[(0,l._)("a",{class:"page-link text-secondary",href:"#",onClick:(0,d.iM)((a=>b.updatePage(e)),["prevent"])},(0,s.zw)(e),9,r)])))),128)),c])])}var h={props:["pages"],methods:{updatePage(e){this.$emit("update-page",e)}}},b=t(89);const m=(0,b.Z)(h,[["render",u]]);var p=m},8297:function(e,a,t){t.r(a),t.d(a,{default:function(){return ze}});var l=t(3396),d=t(7139);const s={key:0,class:"container-fluid text-center text-black",style:{padding:"40vh 0"}},i=(0,l._)("h2",null,"尚未有訂單。",-1),n=[i],o={key:1,class:"container-fluid pt-utility"},r={class:"text-end"},c={class:"table mt-4",style:{"table-layout":"fixed"}},u=(0,l._)("thead",null,[(0,l._)("tr",{class:"font-medium tracking-wider"},[(0,l._)("th",{class:"d-none d-md-table-cell"},"購買時間"),(0,l._)("th",{class:""},"Email"),(0,l._)("th",null,"購買款項"),(0,l._)("th",{class:"d-none d-md-table-cell"},"應付金額"),(0,l._)("th",{class:"d-none d-md-table-cell"},"是否付款"),(0,l._)("th",null,"編輯")])],-1),h={class:"align-middle d-none d-md-table-cell"},b={class:"align-middle",width:"30",style:{overflow:"hidden","text-overflow":"ellipsis"}},m={class:"align-middle",style:{overflow:"auto"}},p={class:"list-unstyled"},g=(0,l._)("br",null,null,-1),_={class:"d-none d-md-table-cell align-middle"},v={class:"d-none d-md-table-cell align-middle"},w={key:0},D={key:1},k={class:"align-middle"},y={class:"btn-group"},f=["onClick"],x=["onClick"];function M(e,a,t,i,M,z){const A=(0,l.up)("loading"),C=(0,l.up)("Pagination"),U=(0,l.up)("orderModal"),$=(0,l.up)("deleteModal"),H=(0,l.up)("deleteOrderAllModal");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(A,{active:M.isLoading,"onUpdate:active":a[0]||(a[0]=e=>M.isLoading=e)},null,8,["active"]),0===this.data.length?((0,l.wg)(),(0,l.iD)("div",s,n)):((0,l.wg)(),(0,l.iD)("div",o,[(0,l._)("div",r,[(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:a[1]||(a[1]=(...e)=>z.deleteAllModal&&z.deleteAllModal(...e))},"刪除全部訂單")]),(0,l._)("table",c,[u,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(M.data,(a=>((0,l.wg)(),(0,l.iD)("tr",{key:a.id},[(0,l._)("td",h,(0,d.zw)(e.$filters.date(a.create_at)),1),(0,l._)("td",b,(0,d.zw)(a.user.email),1),(0,l._)("td",m,[(0,l._)("ul",p,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.products,((e,a)=>((0,l.wg)(),(0,l.iD)("li",{key:a},[(0,l.Uk)((0,d.zw)(e.product.title),1),g,(0,l.Uk)(" "+(0,d.zw)(e.qty)+" "+(0,d.zw)(e.product.unit),1)])))),128))])]),(0,l._)("td",_,(0,d.zw)(a.total),1),(0,l._)("td",v,[a.is_paid?((0,l.wg)(),(0,l.iD)("span",w,"已付款")):((0,l.wg)(),(0,l.iD)("span",D,"未付款"))]),(0,l._)("td",k,[(0,l._)("div",y,[(0,l._)("button",{class:"btn btn-outline-primary btn-sm",onClick:e=>z.ChangeModal(a)},"檢視",8,f),(0,l._)("button",{class:"btn btn-outline-danger btn-sm",onClick:e=>z.DeleteModal(a)},"刪除",8,x)])])])))),128))])]),(0,l.Wm)(C,{class:"position-fixed bottom-0 start-50 translate-middle-x",pages:M.pagination,onUpdatePage:z.getData},null,8,["pages","onUpdatePage"])])),(0,l.Wm)(U,{ref:"orderModal","change-data":M.changeData},null,8,["change-data"]),(0,l.Wm)($,{ref:"deleteModal","delete-data":M.deleteData,onDeleteItem:z.deleteItem},null,8,["delete-data","onDeleteItem"]),(0,l.Wm)(H,{ref:"deleteOrderAllModal",onDeleteAll:z.deleteAll},null,8,["onDeleteAll"])],64)}const z={class:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-hidden":"true",ref:"modal"},A={class:"modal-dialog"},C={class:"modal-content text-black"},U=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title",id:"staticBackdropLabel"},"檢視訂單"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),$={class:"modal-body"},H={class:"container"},L={class:"row"},Z={class:"col-12"},P={class:""},Y=(0,l._)("br",null,null,-1),K={class:"col-12"},I=(0,l._)("h5",null,"購買商品資訊",-1),O=(0,l._)("br",null,null,-1),W={class:"col-12"},q=(0,l._)("h5",null,"客戶資料",-1),B=(0,l._)("div",{class:"modal-footer"},[(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉")],-1);function S(e,a,t,s,i,n){return(0,l.wg)(),(0,l.iD)("div",z,[(0,l._)("div",A,[(0,l._)("div",C,[U,(0,l._)("div",$,[(0,l._)("div",H,[(0,l._)("div",L,[(0,l._)("div",Z,[(0,l._)("div",P,[(0,l._)("p",null,[(0,l.Uk)("訂單時間:"+(0,d.zw)(this.changeData.create_at),1),Y,(0,l.Uk)(" 訂單編號:"+(0,d.zw)(this.changeData.id),1)])])]),(0,l._)("div",K,[I,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.changeData.products,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{key:a},[(0,l._)("p",null,[(0,l.Uk)("書名:"+(0,d.zw)(e.product.title)+" ",1),O,(0,l.Uk)(" 數量:"+(0,d.zw)(e.qty)+"/"+(0,d.zw)(e.product.unit),1)])])))),128)),(0,l.Uk)(" 應付金額:"+(0,d.zw)(this.changeData.total)+"$ ",1)]),(0,l._)("div",W,[q,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.changeData.user,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{key:a},(0,d.zw)(e),1)))),128)),(0,l._)("p",null," 留言: "+(0,d.zw)(this.changeData.message),1)])])])]),B])])],512)}var E=t(1339),j={data(){return{modal:{}}},props:["changeData"],mixins:[E.Z]},N=t(89);const F=(0,N.Z)(j,[["render",S]]);var G=F,J=t(9848);const Q={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},R={class:"modal-dialog"},T={class:"modal-content"},V=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title text-danger",id:"exampleModalLabel"},"刪除警告"),(0,l._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),X={class:"modal-body text-black"},ee=(0,l._)("br",null,null,-1),ae=(0,l._)("br",null,null,-1),te=(0,l._)("h5",null,"購買款項",-1),le=(0,l._)("br",null,null,-1),de=(0,l._)("br",null,null,-1),se=(0,l._)("h5",null,"顧客資訊",-1),ie={class:"modal-footer"},ne=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1);function oe(e,a,t,s,i,n){return(0,l.wg)(),(0,l.iD)("div",Q,[(0,l._)("div",R,[(0,l._)("div",T,[V,(0,l._)("div",X,[(0,l.Uk)(" 購買時間:"+(0,d.zw)(this.deleteData.create_at)+" ",1),ee,(0,l.Uk)(" 訂單編號:"+(0,d.zw)(this.deleteData.id)+" ",1),ae,te,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.deleteData.products,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{key:a},[(0,l.Uk)((0,d.zw)(e.product.title)+" ",1),le,(0,l.Uk)(" "+(0,d.zw)(e.qty)+" / "+(0,d.zw)(e.product.unit)+" ",1),de])))),128)),(0,l.Uk)(" "+(0,d.zw)(this.deleteData.total)+"$ ",1),se,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(this.deleteData.user,((e,a)=>((0,l.wg)(),(0,l.iD)("div",{key:a},(0,d.zw)(e),1)))),128))]),(0,l._)("div",ie,[ne,(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:a[0]||(a[0]=e=>n.checkDelete())},"確認刪除")])])])],512)}var re={data(){return{}},methods:{checkDelete(){this.$emit("deleteItem")}},props:["deleteData"],mixins:[E.Z]};const ce=(0,N.Z)(re,[["render",oe]]);var ue=ce;const he={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"modal"},be={class:"modal-dialog"},me={class:"modal-content text-black"},pe=(0,l.uE)('<div class="modal-header"><h5 class="modal-title text-danger" id="exampleModalLabel">刪除警告</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> 確定要刪除全部訂單嗎 <span class="text-red">(刪除後無法恢復)</span></div>',2),ge={class:"modal-footer"},_e=(0,l._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"關閉",-1);function ve(e,a,t,d,s,i){return(0,l.wg)(),(0,l.iD)("div",he,[(0,l._)("div",be,[(0,l._)("div",me,[pe,(0,l._)("div",ge,[_e,(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:a[0]||(a[0]=(...e)=>i.deleteAll&&i.deleteAll(...e))},"刪除")])])])],512)}var we={data(){return{modal:{}}},methods:{deleteAll(){this.$emit("deleteAll")}},mixins:[E.Z]};const De=(0,N.Z)(we,[["render",ve]]);var ke=De,ye=t(3752),fe=t.n(ye),xe={data(){return{data:{},deleteData:{},changeData:{},pagination:{},isLoading:!1}},components:{Loading:fe(),orderModal:G,Pagination:J.Z,deleteModal:ue,deleteOrderAllModal:ke},methods:{getData(e=1){const a=`https://vue3-course-api.hexschool.io/api/dessertsweet/admin/orders?page=${e}`;this.axios.get(a).then((e=>{this.data=e.data.orders,this.pagination=e.data.pagination}))},deleteAllModal(){this.$refs.deleteOrderAllModal.modalShow()},ChangeModal(e){this.changeData=e,this.$refs.orderModal.modalShow()},DeleteModal(e){this.deleteData=e,this.$refs.deleteModal.modalShow()},deleteItem(){const{id:e}=this.deleteData,a=`https://vue3-course-api.hexschool.io/api/dessertsweet/admin/order/${e}`;this.axios.delete(a).then((()=>{this.$refs.deleteModal.modalHide(),this.getData()}))},deleteAll(){const e="https://vue3-course-api.hexschool.io/api/dessertsweet/admin/orders/all";this.axios.delete(e).then((()=>{this.$refs.deleteOrderAllModal.modalHide(),this.getData()}))}},created(){this.getData()}};const Me=(0,N.Z)(xe,[["render",M]]);var ze=Me}}]);
//# sourceMappingURL=297.929fb461.js.map